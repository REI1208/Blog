import{a as N,o as R}from"./evtd-CI_DDEu_.js";import{i as pe,d as oe,p as _,e as xe,a as Ve}from"./seemly-BaDA4oAW.js";import{u as P}from"./@css-render-B7SAju1e.js";import{g as Me,u as ee,o as $e,i as Se}from"./vooks-C-36Wnvh.js";import{z as Te}from"./vdirs-Bxp-63WN.js";import{R as ze}from"./@juggle-C8OzoCMD.js";import{C as Ee}from"./css-render-BDrvWz3H.js";function te(n,e,t="default"){const o=e[t];if(o===void 0)throw new Error(`[vueuc/${n}]: slot[${t}] is empty.`);return o()}function ne(n,e=!0,t=[]){return n.forEach(o=>{if(o!==null){if(typeof o!="object"){(typeof o=="string"||typeof o=="number")&&t.push(Vue.createTextVNode(String(o)));return}if(Array.isArray(o)){ne(o,e,t);return}if(o.type===Vue.Fragment){if(o.children===null)return;Array.isArray(o.children)&&ne(o.children,e,t)}else o.type!==Vue.Comment&&t.push(o)}}),t}function re(n,e,t="default"){const o=e[t];if(o===void 0)throw new Error(`[vueuc/${n}]: slot[${t}] is empty.`);const r=ne(o());if(r.length===1)return r[0];throw new Error(`[vueuc/${n}]: slot[${t}] should have exactly one child.`)}let k=null;function me(){if(k===null&&(k=document.getElementById("v-binder-view-measurer"),k===null)){k=document.createElement("div"),k.id="v-binder-view-measurer";const{style:n}=k;n.position="fixed",n.left="0",n.right="0",n.top="0",n.bottom="0",n.pointerEvents="none",n.visibility="hidden",document.body.appendChild(k)}return k.getBoundingClientRect()}function Ae(n,e){const t=me();return{top:e,left:n,height:0,width:0,right:t.width-n,bottom:t.height-e}}function J(n){const e=n.getBoundingClientRect(),t=me();return{left:e.left-t.left,top:e.top-t.top,bottom:t.height+t.top-e.bottom,right:t.width+t.left-e.right,width:e.width,height:e.height}}function Be(n){return n.nodeType===9?null:n.parentNode}function ve(n){if(n===null)return null;const e=Be(n);if(e===null)return null;if(e.nodeType===9)return document;if(e.nodeType===1){const{overflow:t,overflowX:o,overflowY:r}=getComputedStyle(e);if(/(auto|scroll|overlay)/.test(t+r+o))return e}return ve(e)}const Re=Vue.defineComponent({name:"Binder",props:{syncTargetWithParent:Boolean,syncTarget:{type:Boolean,default:!0}},setup(n){var e;Vue.provide("VBinder",(e=Vue.getCurrentInstance())===null||e===void 0?void 0:e.proxy);const t=Vue.inject("VBinder",null),o=Vue.ref(null),r=i=>{o.value=i,t&&n.syncTargetWithParent&&t.setTargetRef(i)};let l=[];const v=()=>{let i=o.value;for(;i=ve(i),i!==null;)l.push(i);for(const y of l)R("scroll",y,M,!0)},m=()=>{for(const i of l)N("scroll",i,M,!0);l=[]},d=new Set,w=i=>{d.size===0&&v(),d.has(i)||d.add(i)},g=i=>{d.has(i)&&d.delete(i),d.size===0&&m()},M=()=>{pe(a)},a=()=>{d.forEach(i=>i())},c=new Set,p=i=>{c.size===0&&R("resize",window,s),c.has(i)||c.add(i)},h=i=>{c.has(i)&&c.delete(i),c.size===0&&N("resize",window,s)},s=()=>{c.forEach(i=>i())};return Vue.onBeforeUnmount(()=>{N("resize",window,s),m()}),{targetRef:o,setTargetRef:r,addScrollListener:w,removeScrollListener:g,addResizeListener:p,removeResizeListener:h}},render(){return te("binder",this.$slots)}}),et=Vue.defineComponent({name:"Target",setup(){const{setTargetRef:n,syncTarget:e}=Vue.inject("VBinder");return{syncTarget:e,setTargetDirective:{mounted:n,updated:n}}},render(){const{syncTarget:n,setTargetDirective:e}=this;return n?Vue.withDirectives(re("follower",this.$slots),[[e]]):re("follower",this.$slots)}});function ie(n,e){console.error(`[vueuc/${n}]: ${e}`)}const{c:B}=Ee(),q="vueuc-style";function le(n){return n&-n}class Fe{constructor(e,t){this.l=e,this.min=t;const o=new Array(e+1);for(let r=0;r<e+1;++r)o[r]=0;this.ft=o}add(e,t){if(t===0)return;const{l:o,ft:r}=this;for(e+=1;e<=o;)r[e]+=t,e+=le(e)}get(e){return this.sum(e+1)-this.sum(e)}sum(e){if(e===void 0&&(e=this.l),e<=0)return 0;const{ft:t,min:o,l:r}=this;if(e>r)throw new Error("[FinweckTree.sum]: `i` is larger than length.");let l=e*o;for(;e>0;)l+=t[e],e-=le(e);return l}getBound(e){let t=0,o=this.l;for(;o>t;){const r=Math.floor((t+o)/2),l=this.sum(r);if(l>e){o=r;continue}else if(l<e){if(t===r)return this.sum(t+1)<=e?t+1:r;t=r}else return r}return t}}function se(n){return typeof n=="string"?document.querySelector(n):n()}const Ie=Vue.defineComponent({name:"LazyTeleport",props:{to:{type:[String,Object],default:void 0},disabled:Boolean,show:{type:Boolean,required:!0}},setup(n){return{showTeleport:Me(Vue.toRef(n,"show")),mergedTo:Vue.computed(()=>{const{to:e}=n;return e??"body"})}},render(){return this.showTeleport?this.disabled?te("lazy-teleport",this.$slots):Vue.h(Vue.Teleport,{disabled:this.disabled,to:this.mergedTo},te("lazy-teleport",this.$slots)):null}}),U={top:"bottom",bottom:"top",left:"right",right:"left"},ue={start:"end",center:"center",end:"start"},Q={top:"height",bottom:"height",left:"width",right:"width"},Ce={"bottom-start":"top left",bottom:"top center","bottom-end":"top right","top-start":"bottom left",top:"bottom center","top-end":"bottom right","right-start":"top left",right:"center left","right-end":"bottom left","left-start":"top right",left:"center right","left-end":"bottom right"},Oe={"bottom-start":"bottom left",bottom:"bottom center","bottom-end":"bottom right","top-start":"top left",top:"top center","top-end":"top right","right-start":"top right",right:"center right","right-end":"bottom right","left-start":"top left",left:"center left","left-end":"bottom left"},We={"bottom-start":"right","bottom-end":"left","top-start":"right","top-end":"left","right-start":"bottom","right-end":"top","left-start":"bottom","left-end":"top"},ae={top:!0,bottom:!1,left:!0,right:!1},de={top:"end",bottom:"start",left:"end",right:"start"};function ke(n,e,t,o,r,l){if(!r||l)return{placement:n,top:0,left:0};const[v,m]=n.split("-");let d=m??"center",w={top:0,left:0};const g=(c,p,h)=>{let s=0,i=0;const y=t[c]-e[p]-e[c];return y>0&&o&&(h?i=ae[p]?y:-y:s=ae[p]?y:-y),{left:s,top:i}},M=v==="left"||v==="right";if(d!=="center"){const c=We[n],p=U[c],h=Q[c];if(t[h]>e[h]){if(e[c]+e[h]<t[h]){const s=(t[h]-e[h])/2;e[c]<s||e[p]<s?e[c]<e[p]?(d=ue[m],w=g(h,p,M)):w=g(h,c,M):d="center"}}else t[h]<e[h]&&e[p]<0&&e[c]>e[p]&&(d=ue[m])}else{const c=v==="bottom"||v==="top"?"left":"top",p=U[c],h=Q[c],s=(t[h]-e[h])/2;(e[c]<s||e[p]<s)&&(e[c]>e[p]?(d=de[c],w=g(h,c,M)):(d=de[p],w=g(h,p,M)))}let a=v;return e[v]<t[Q[v]]&&e[v]<e[U[v]]&&(a=U[v]),{placement:d!=="center"?`${a}-${d}`:a,left:w.left,top:w.top}}function Le(n,e){return e?Oe[n]:Ce[n]}function He(n,e,t,o,r,l){if(l)switch(n){case"bottom-start":return{top:`${Math.round(t.top-e.top+t.height)}px`,left:`${Math.round(t.left-e.left)}px`,transform:"translateY(-100%)"};case"bottom-end":return{top:`${Math.round(t.top-e.top+t.height)}px`,left:`${Math.round(t.left-e.left+t.width)}px`,transform:"translateX(-100%) translateY(-100%)"};case"top-start":return{top:`${Math.round(t.top-e.top)}px`,left:`${Math.round(t.left-e.left)}px`,transform:""};case"top-end":return{top:`${Math.round(t.top-e.top)}px`,left:`${Math.round(t.left-e.left+t.width)}px`,transform:"translateX(-100%)"};case"right-start":return{top:`${Math.round(t.top-e.top)}px`,left:`${Math.round(t.left-e.left+t.width)}px`,transform:"translateX(-100%)"};case"right-end":return{top:`${Math.round(t.top-e.top+t.height)}px`,left:`${Math.round(t.left-e.left+t.width)}px`,transform:"translateX(-100%) translateY(-100%)"};case"left-start":return{top:`${Math.round(t.top-e.top)}px`,left:`${Math.round(t.left-e.left)}px`,transform:""};case"left-end":return{top:`${Math.round(t.top-e.top+t.height)}px`,left:`${Math.round(t.left-e.left)}px`,transform:"translateY(-100%)"};case"top":return{top:`${Math.round(t.top-e.top)}px`,left:`${Math.round(t.left-e.left+t.width/2)}px`,transform:"translateX(-50%)"};case"right":return{top:`${Math.round(t.top-e.top+t.height/2)}px`,left:`${Math.round(t.left-e.left+t.width)}px`,transform:"translateX(-100%) translateY(-50%)"};case"left":return{top:`${Math.round(t.top-e.top+t.height/2)}px`,left:`${Math.round(t.left-e.left)}px`,transform:"translateY(-50%)"};case"bottom":default:return{top:`${Math.round(t.top-e.top+t.height)}px`,left:`${Math.round(t.left-e.left+t.width/2)}px`,transform:"translateX(-50%) translateY(-100%)"}}switch(n){case"bottom-start":return{top:`${Math.round(t.top-e.top+t.height+o)}px`,left:`${Math.round(t.left-e.left+r)}px`,transform:""};case"bottom-end":return{top:`${Math.round(t.top-e.top+t.height+o)}px`,left:`${Math.round(t.left-e.left+t.width+r)}px`,transform:"translateX(-100%)"};case"top-start":return{top:`${Math.round(t.top-e.top+o)}px`,left:`${Math.round(t.left-e.left+r)}px`,transform:"translateY(-100%)"};case"top-end":return{top:`${Math.round(t.top-e.top+o)}px`,left:`${Math.round(t.left-e.left+t.width+r)}px`,transform:"translateX(-100%) translateY(-100%)"};case"right-start":return{top:`${Math.round(t.top-e.top+o)}px`,left:`${Math.round(t.left-e.left+t.width+r)}px`,transform:""};case"right-end":return{top:`${Math.round(t.top-e.top+t.height+o)}px`,left:`${Math.round(t.left-e.left+t.width+r)}px`,transform:"translateY(-100%)"};case"left-start":return{top:`${Math.round(t.top-e.top+o)}px`,left:`${Math.round(t.left-e.left+r)}px`,transform:"translateX(-100%)"};case"left-end":return{top:`${Math.round(t.top-e.top+t.height+o)}px`,left:`${Math.round(t.left-e.left+r)}px`,transform:"translateX(-100%) translateY(-100%)"};case"top":return{top:`${Math.round(t.top-e.top+o)}px`,left:`${Math.round(t.left-e.left+t.width/2+r)}px`,transform:"translateY(-100%) translateX(-50%)"};case"right":return{top:`${Math.round(t.top-e.top+t.height/2+o)}px`,left:`${Math.round(t.left-e.left+t.width+r)}px`,transform:"translateY(-50%)"};case"left":return{top:`${Math.round(t.top-e.top+t.height/2+o)}px`,left:`${Math.round(t.left-e.left+r)}px`,transform:"translateY(-50%) translateX(-100%)"};case"bottom":default:return{top:`${Math.round(t.top-e.top+t.height+o)}px`,left:`${Math.round(t.left-e.left+t.width/2+r)}px`,transform:"translateX(-50%)"}}}const Ye=B([B(".v-binder-follower-container",{position:"absolute",left:"0",right:"0",top:"0",height:"0",pointerEvents:"none",zIndex:"auto"}),B(".v-binder-follower-content",{position:"absolute",zIndex:"auto"},[B("> *",{pointerEvents:"all"})])]),tt=Vue.defineComponent({name:"Follower",inheritAttrs:!1,props:{show:Boolean,enabled:{type:Boolean,default:void 0},placement:{type:String,default:"bottom"},syncTrigger:{type:Array,default:["resize","scroll"]},to:[String,Object],flip:{type:Boolean,default:!0},internalShift:Boolean,x:Number,y:Number,width:String,minWidth:String,containerClass:String,teleportDisabled:Boolean,zindexable:{type:Boolean,default:!0},zIndex:Number,overlap:Boolean},setup(n){const e=Vue.inject("VBinder"),t=ee(()=>n.enabled!==void 0?n.enabled:n.show),o=Vue.ref(null),r=Vue.ref(null),l=()=>{const{syncTrigger:a}=n;a.includes("scroll")&&e.addScrollListener(d),a.includes("resize")&&e.addResizeListener(d)},v=()=>{e.removeScrollListener(d),e.removeResizeListener(d)};Vue.onMounted(()=>{t.value&&(d(),l())});const m=P();Ye.mount({id:"vueuc/binder",head:!0,anchorMetaName:q,ssr:m}),Vue.onBeforeUnmount(()=>{v()}),$e(()=>{t.value&&d()});const d=()=>{if(!t.value)return;const a=o.value;if(a===null)return;const c=e.targetRef,{x:p,y:h,overlap:s}=n,i=p!==void 0&&h!==void 0?Ae(p,h):J(c);a.style.setProperty("--v-target-width",`${Math.round(i.width)}px`),a.style.setProperty("--v-target-height",`${Math.round(i.height)}px`);const{width:y,minWidth:x,placement:A,internalShift:I,flip:Y}=n;a.setAttribute("v-placement",A),s?a.setAttribute("v-overlap",""):a.removeAttribute("v-overlap");const{style:z}=a;y==="target"?z.width=`${i.width}px`:y!==void 0?z.width=y:z.width="",x==="target"?z.minWidth=`${i.width}px`:x!==void 0?z.minWidth=x:z.minWidth="";const L=J(a),C=J(r.value),{left:O,top:u,placement:f}=ke(A,i,L,I,Y,s),b=Le(f,s),{left:V,top:$,transform:T}=He(f,C,i,u,O,s);a.setAttribute("v-placement",f),a.style.setProperty("--v-offset-left",`${Math.round(O)}px`),a.style.setProperty("--v-offset-top",`${Math.round(u)}px`),a.style.transform=`translateX(${V}) translateY(${$}) ${T}`,a.style.setProperty("--v-transform-origin",b),a.style.transformOrigin=b};Vue.watch(t,a=>{a?(l(),w()):v()});const w=()=>{Vue.nextTick().then(d).catch(a=>console.error(a))};["placement","x","y","internalShift","flip","width","overlap","minWidth"].forEach(a=>{Vue.watch(Vue.toRef(n,a),d)}),["teleportDisabled"].forEach(a=>{Vue.watch(Vue.toRef(n,a),w)}),Vue.watch(Vue.toRef(n,"syncTrigger"),a=>{a.includes("resize")?e.addResizeListener(d):e.removeResizeListener(d),a.includes("scroll")?e.addScrollListener(d):e.removeScrollListener(d)});const g=Se(),M=ee(()=>{const{to:a}=n;if(a!==void 0)return a;g.value});return{VBinder:e,mergedEnabled:t,offsetContainerRef:r,followerRef:o,mergedTo:M,syncPosition:d}},render(){return Vue.h(Ie,{show:this.show,to:this.mergedTo,disabled:this.teleportDisabled},{default:()=>{var n,e;const t=Vue.h("div",{class:["v-binder-follower-container",this.containerClass],ref:"offsetContainerRef"},[Vue.h("div",{class:"v-binder-follower-content",ref:"followerRef"},(e=(n=this.$slots).default)===null||e===void 0?void 0:e.call(n))]);return this.zindexable?Vue.withDirectives(t,[[Te,{enabled:this.mergedEnabled,zIndex:this.zIndex}]]):t}})}});class Xe{constructor(){this.handleResize=this.handleResize.bind(this),this.observer=new(typeof window<"u"&&window.ResizeObserver||ze)(this.handleResize),this.elHandlersMap=new Map}handleResize(e){for(const t of e){const o=this.elHandlersMap.get(t.target);o!==void 0&&o(t)}}registerHandler(e,t){this.elHandlersMap.set(e,t),this.observer.observe(e)}unregisterHandler(e){this.elHandlersMap.has(e)&&(this.elHandlersMap.delete(e),this.observer.unobserve(e))}}const fe=new Xe,ce=Vue.defineComponent({name:"ResizeObserver",props:{onResize:Function},setup(n){let e=!1;const t=Vue.getCurrentInstance().proxy;function o(r){const{onResize:l}=n;l!==void 0&&l(r)}Vue.onMounted(()=>{const r=t.$el;if(r===void 0){ie("resize-observer","$el does not exist.");return}if(r.nextElementSibling!==r.nextSibling&&r.nodeType===3&&r.nodeValue!==""){ie("resize-observer","$el can not be observed (it may be a text node).");return}r.nextElementSibling!==null&&(fe.registerHandler(r.nextElementSibling,o),e=!0)}),Vue.onBeforeUnmount(()=>{e&&fe.unregisterHandler(t.$el.nextElementSibling)})},render(){return Vue.renderSlot(this.$slots,"default")}});let j;function De(){return typeof document>"u"?!1:(j===void 0&&("matchMedia"in window?j=window.matchMedia("(pointer:coarse)").matches:j=!1),j)}let Z;function he(){return typeof document>"u"?1:(Z===void 0&&(Z="chrome"in window?window.devicePixelRatio:1),Z)}const Ne=B(".v-vl",{maxHeight:"inherit",height:"100%",overflow:"auto",minWidth:"1px"},[B("&:not(.v-vl--show-scrollbar)",{scrollbarWidth:"none"},[B("&::-webkit-scrollbar, &::-webkit-scrollbar-track-piece, &::-webkit-scrollbar-thumb",{width:0,height:0,display:"none"})])]),nt=Vue.defineComponent({name:"VirtualList",inheritAttrs:!1,props:{showScrollbar:{type:Boolean,default:!0},items:{type:Array,default:()=>[]},itemSize:{type:Number,required:!0},itemResizable:Boolean,itemsStyle:[String,Object],visibleItemsTag:{type:[String,Object],default:"div"},visibleItemsProps:Object,ignoreItemResize:Boolean,onScroll:Function,onWheel:Function,onResize:Function,defaultScrollKey:[Number,String],defaultScrollIndex:Number,keyField:{type:String,default:"key"},paddingTop:{type:[Number,String],default:0},paddingBottom:{type:[Number,String],default:0}},setup(n){const e=P();Ne.mount({id:"vueuc/virtual-list",head:!0,anchorMetaName:q,ssr:e}),Vue.onMounted(()=>{const{defaultScrollIndex:u,defaultScrollKey:f}=n;u!=null?p({index:u}):f!=null&&p({key:f})});let t=!1,o=!1;Vue.onActivated(()=>{if(t=!1,!o){o=!0;return}p({top:M.value,left:g})}),Vue.onDeactivated(()=>{t=!0,o||(o=!0)});const r=Vue.computed(()=>{const u=new Map,{keyField:f}=n;return n.items.forEach((b,V)=>{u.set(b[f],V)}),u}),l=Vue.ref(null),v=Vue.ref(void 0),m=new Map,d=Vue.computed(()=>{const{items:u,itemSize:f,keyField:b}=n,V=new Fe(u.length,f);return u.forEach(($,T)=>{const S=$[b],E=m.get(S);E!==void 0&&V.add(T,E)}),V}),w=Vue.ref(0);let g=0;const M=Vue.ref(0),a=ee(()=>Math.max(d.value.getBound(M.value-oe(n.paddingTop))-1,0)),c=Vue.computed(()=>{const{value:u}=v;if(u===void 0)return[];const{items:f,itemSize:b}=n,V=a.value,$=Math.min(V+Math.ceil(u/b+1),f.length-1),T=[];for(let S=V;S<=$;++S)T.push(f[S]);return T}),p=(u,f)=>{if(typeof u=="number"){y(u,f,"auto");return}const{left:b,top:V,index:$,key:T,position:S,behavior:E,debounce:W=!0}=u;if(b!==void 0||V!==void 0)y(b,V,E);else if($!==void 0)i($,E,W);else if(T!==void 0){const K=r.value.get(T);K!==void 0&&i(K,E,W)}else S==="bottom"?y(0,Number.MAX_SAFE_INTEGER,E):S==="top"&&y(0,0,E)};let h,s=null;function i(u,f,b){const{value:V}=d,$=V.sum(u)+oe(n.paddingTop);if(!b)l.value.scrollTo({left:0,top:$,behavior:f});else{h=u,s!==null&&window.clearTimeout(s),s=window.setTimeout(()=>{h=void 0,s=null},16);const{scrollTop:T,offsetHeight:S}=l.value;if($>T){const E=V.get(u);$+E<=T+S||l.value.scrollTo({left:0,top:$+E-S,behavior:f})}else l.value.scrollTo({left:0,top:$,behavior:f})}}function y(u,f,b){l.value.scrollTo({left:u,top:f,behavior:b})}function x(u,f){var b,V,$;if(t||n.ignoreItemResize||O(f.target))return;const{value:T}=d,S=r.value.get(u),E=T.get(S),W=($=(V=(b=f.borderBoxSize)===null||b===void 0?void 0:b[0])===null||V===void 0?void 0:V.blockSize)!==null&&$!==void 0?$:f.contentRect.height;if(W===E)return;W-n.itemSize===0?m.delete(u):m.set(u,W-n.itemSize);const X=W-E;if(X===0)return;T.add(S,X);const H=l.value;if(H!=null){if(h===void 0){const G=T.sum(S);H.scrollTop>G&&H.scrollBy(0,X)}else if(S<h)H.scrollBy(0,X);else if(S===h){const G=T.sum(S);W+G>H.scrollTop+H.offsetHeight&&H.scrollBy(0,X)}C()}w.value++}const A=!De();let I=!1;function Y(u){var f;(f=n.onScroll)===null||f===void 0||f.call(n,u),(!A||!I)&&C()}function z(u){var f;if((f=n.onWheel)===null||f===void 0||f.call(n,u),A){const b=l.value;if(b!=null){if(u.deltaX===0&&(b.scrollTop===0&&u.deltaY<=0||b.scrollTop+b.offsetHeight>=b.scrollHeight&&u.deltaY>=0))return;u.preventDefault(),b.scrollTop+=u.deltaY/he(),b.scrollLeft+=u.deltaX/he(),C(),I=!0,pe(()=>{I=!1})}}}function L(u){if(t||O(u.target)||u.contentRect.height===v.value)return;v.value=u.contentRect.height;const{onResize:f}=n;f!==void 0&&f(u)}function C(){const{value:u}=l;u!=null&&(M.value=u.scrollTop,g=u.scrollLeft)}function O(u){let f=u;for(;f!==null;){if(f.style.display==="none")return!0;f=f.parentElement}return!1}return{listHeight:v,listStyle:{overflow:"auto"},keyToIndex:r,itemsStyle:Vue.computed(()=>{const{itemResizable:u}=n,f=_(d.value.sum());return w.value,[n.itemsStyle,{boxSizing:"content-box",height:u?"":f,minHeight:u?f:"",paddingTop:_(n.paddingTop),paddingBottom:_(n.paddingBottom)}]}),visibleItemsStyle:Vue.computed(()=>(w.value,{transform:`translateY(${_(d.value.sum(a.value))})`})),viewportItems:c,listElRef:l,itemsElRef:Vue.ref(null),scrollTo:p,handleListResize:L,handleListScroll:Y,handleListWheel:z,handleItemResize:x}},render(){const{itemResizable:n,keyField:e,keyToIndex:t,visibleItemsTag:o}=this;return Vue.h(ce,{onResize:this.handleListResize},{default:()=>{var r,l;return Vue.h("div",Vue.mergeProps(this.$attrs,{class:["v-vl",this.showScrollbar&&"v-vl--show-scrollbar"],onScroll:this.handleListScroll,onWheel:this.handleListWheel,ref:"listElRef"}),[this.items.length!==0?Vue.h("div",{ref:"itemsElRef",class:"v-vl-items",style:this.itemsStyle},[Vue.h(o,Object.assign({class:"v-vl-visible-items",style:this.visibleItemsStyle},this.visibleItemsProps),{default:()=>this.viewportItems.map(v=>{const m=v[e],d=t.get(m),w=this.$slots.default({item:v,index:d})[0];return n?Vue.h(ce,{key:m,onResize:g=>this.handleItemResize(m,g)},{default:()=>w}):(w.key=m,w)})})]):(l=(r=this.$slots).empty)===null||l===void 0?void 0:l.call(r)])}})}}),_e=B(".v-x-scroll",{overflow:"auto",scrollbarWidth:"none"},[B("&::-webkit-scrollbar",{width:0,height:0})]),ot=Vue.defineComponent({name:"XScroll",props:{disabled:Boolean,onScroll:Function},setup(){const n=Vue.ref(null);function e(r){!(r.currentTarget.offsetWidth<r.currentTarget.scrollWidth)||r.deltaY===0||(r.currentTarget.scrollLeft+=r.deltaY+r.deltaX,r.preventDefault())}const t=P();return _e.mount({id:"vueuc/x-scroll",head:!0,anchorMetaName:q,ssr:t}),Object.assign({selfRef:n,handleWheel:e},{scrollTo(...r){var l;(l=n.value)===null||l===void 0||l.scrollTo(...r)}})},render(){return Vue.h("div",{ref:"selfRef",onScroll:this.onScroll,onWheel:this.disabled?void 0:this.handleWheel,class:"v-x-scroll"},this.$slots)}}),F="v-hidden",Ue=B("[v-hidden]",{display:"none!important"}),rt=Vue.defineComponent({name:"Overflow",props:{getCounter:Function,getTail:Function,updateCounter:Function,onUpdateCount:Function,onUpdateOverflow:Function},setup(n,{slots:e}){const t=Vue.ref(null),o=Vue.ref(null);function r(v){const{value:m}=t,{getCounter:d,getTail:w}=n;let g;if(d!==void 0?g=d():g=o.value,!m||!g)return;g.hasAttribute(F)&&g.removeAttribute(F);const{children:M}=m;if(v.showAllItemsBeforeCalculate)for(const x of M)x.hasAttribute(F)&&x.removeAttribute(F);const a=m.offsetWidth,c=[],p=e.tail?w==null?void 0:w():null;let h=p?p.offsetWidth:0,s=!1;const i=m.children.length-(e.tail?1:0);for(let x=0;x<i-1;++x){if(x<0)continue;const A=M[x];if(s){A.hasAttribute(F)||A.setAttribute(F,"");continue}else A.hasAttribute(F)&&A.removeAttribute(F);const I=A.offsetWidth;if(h+=I,c[x]=I,h>a){const{updateCounter:Y}=n;for(let z=x;z>=0;--z){const L=i-1-z;Y!==void 0?Y(L):g.textContent=`${L}`;const C=g.offsetWidth;if(h-=c[z],h+C<=a||z===0){s=!0,x=z-1,p&&(x===-1?(p.style.maxWidth=`${a-C}px`,p.style.boxSizing="border-box"):p.style.maxWidth="");const{onUpdateCount:O}=n;O&&O(L);break}}}}const{onUpdateOverflow:y}=n;s?y!==void 0&&y(!0):(y!==void 0&&y(!1),g.setAttribute(F,""))}const l=P();return Ue.mount({id:"vueuc/overflow",head:!0,anchorMetaName:q,ssr:l}),Vue.onMounted(()=>r({showAllItemsBeforeCalculate:!1})),{selfRef:t,counterRef:o,sync:r}},render(){const{$slots:n}=this;return Vue.nextTick(()=>this.sync({showAllItemsBeforeCalculate:!1})),Vue.h("div",{class:"v-overflow",ref:"selfRef"},[Vue.renderSlot(n,"default"),n.counter?n.counter():Vue.h("span",{style:{display:"inline-block"},ref:"counterRef"}),n.tail?n.tail():null])}});function be(n){return n instanceof HTMLElement}function we(n){for(let e=0;e<n.childNodes.length;e++){const t=n.childNodes[e];if(be(t)&&(ye(t)||we(t)))return!0}return!1}function ge(n){for(let e=n.childNodes.length-1;e>=0;e--){const t=n.childNodes[e];if(be(t)&&(ye(t)||ge(t)))return!0}return!1}function ye(n){if(!je(n))return!1;try{n.focus({preventScroll:!0})}catch{}return document.activeElement===n}function je(n){if(n.tabIndex>0||n.tabIndex===0&&n.getAttribute("tabIndex")!==null)return!0;if(n.getAttribute("disabled"))return!1;switch(n.nodeName){case"A":return!!n.href&&n.rel!=="ignore";case"INPUT":return n.type!=="hidden"&&n.type!=="file";case"BUTTON":case"SELECT":case"TEXTAREA":return!0;default:return!1}}let D=[];const it=Vue.defineComponent({name:"FocusTrap",props:{disabled:Boolean,active:Boolean,autoFocus:{type:Boolean,default:!0},onEsc:Function,initialFocusTo:String,finalFocusTo:String,returnFocusOnDeactivated:{type:Boolean,default:!0}},setup(n){const e=xe(),t=Vue.ref(null),o=Vue.ref(null);let r=!1,l=!1;const v=typeof document>"u"?null:document.activeElement;function m(){return D[D.length-1]===e}function d(s){var i;s.code==="Escape"&&m()&&((i=n.onEsc)===null||i===void 0||i.call(n,s))}Vue.onMounted(()=>{Vue.watch(()=>n.active,s=>{s?(M(),R("keydown",document,d)):(N("keydown",document,d),r&&a())},{immediate:!0})}),Vue.onBeforeUnmount(()=>{N("keydown",document,d),r&&a()});function w(s){if(!l&&m()){const i=g();if(i===null||i.contains(Ve(s)))return;c("first")}}function g(){const s=t.value;if(s===null)return null;let i=s;for(;i=i.nextSibling,!(i===null||i instanceof Element&&i.tagName==="DIV"););return i}function M(){var s;if(!n.disabled){if(D.push(e),n.autoFocus){const{initialFocusTo:i}=n;i===void 0?c("first"):(s=se(i))===null||s===void 0||s.focus({preventScroll:!0})}r=!0,document.addEventListener("focus",w,!0)}}function a(){var s;if(n.disabled||(document.removeEventListener("focus",w,!0),D=D.filter(y=>y!==e),m()))return;const{finalFocusTo:i}=n;i!==void 0?(s=se(i))===null||s===void 0||s.focus({preventScroll:!0}):n.returnFocusOnDeactivated&&v instanceof HTMLElement&&(l=!0,v.focus({preventScroll:!0}),l=!1)}function c(s){if(m()&&n.active){const i=t.value,y=o.value;if(i!==null&&y!==null){const x=g();if(x==null||x===y){l=!0,i.focus({preventScroll:!0}),l=!1;return}l=!0;const A=s==="first"?we(x):ge(x);l=!1,A||(l=!0,i.focus({preventScroll:!0}),l=!1)}}}function p(s){if(l)return;const i=g();i!==null&&(s.relatedTarget!==null&&i.contains(s.relatedTarget)?c("last"):c("first"))}function h(s){l||(s.relatedTarget!==null&&s.relatedTarget===t.value?c("last"):c("first"))}return{focusableStartRef:t,focusableEndRef:o,focusableStyle:"position: absolute; height: 0; width: 0;",handleStartFocus:p,handleEndFocus:h}},render(){const{default:n}=this.$slots;if(n===void 0)return null;if(this.disabled)return n();const{active:e,focusableStyle:t}=this;return Vue.h(Vue.Fragment,null,[Vue.h("div",{"aria-hidden":"true",tabindex:e?"0":"-1",ref:"focusableStartRef",style:t,onFocus:this.handleStartFocus}),n(),Vue.h("div",{"aria-hidden":"true",style:t,ref:"focusableEndRef",tabindex:e?"0":"-1",onFocus:this.handleEndFocus})])}});export{Re as B,it as F,Ie as L,ce as V,nt as a,tt as b,et as c,rt as d,ot as e,fe as r};
