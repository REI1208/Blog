import{A as p}from"./index-CU9a6r43.js";import{_ as V}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{f as g,h as f,B as b,i as w,j as s,e as l}from"./naive-ui-DzK7k0L2.js";import"./pinia-De32WpSU.js";import"./@vue-D5C02RJA.js";import"./vooks-C-36Wnvh.js";import"./evtd-CI_DDEu_.js";import"./seemly-BaDA4oAW.js";import"./date-fns-_9zXgOLk.js";import"./vueuc-ohIFSY2e.js";import"./@css-render-B7SAju1e.js";import"./vdirs-Bxp-63WN.js";import"./@juggle-C8OzoCMD.js";import"./css-render-BDrvWz3H.js";import"./@emotion-WldOFDRm.js";import"./treemate-HRdUPn5m.js";import"./async-validator-DKvM95Vc.js";import"./lodash-es-C4meFci_.js";const x={class:"login-panel"},N={__name:"Login",setup(h){const n=VueRouter.useRouter();VueRouter.useRoute;const i=Vue.inject("axios"),u=Vue.inject("message"),a=p(),c=Vue.ref("medium"),e=Vue.reactive({account:localStorage.getItem("account")||"",password:localStorage.getItem("password")||"",rember:localStorage.getItem("rember")==="1"}),d={account:[{required:!0,message:"请输入账号",trigger:"blur"},{min:3,max:12,message:"账号长度3-12个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:3,max:18,message:"密码长度6-18个字符",trigger:"blur"}]},m=async()=>{let o=await i.post("/admin/login",{account:e.account,password:e.password});o.data.code==200?(u.success("登陆成功"),a.id=o.data.data.id,a.token=o.data.data.token,a.account=o.data.data.account,e.rember?(localStorage.setItem("account",e.account),localStorage.setItem("rember","1")):(localStorage.removeItem("account"),localStorage.setItem("rember","0")),n.push("/dashboard")):u.error("登陆失败"),console.log(o)};return(o,t)=>(Vue.openBlock(),Vue.createElementBlock("div",x,[Vue.createVNode(Vue.unref(g),{title:"管理后台登录"},{footer:Vue.withCtx(()=>[Vue.createVNode(Vue.unref(f),{checked:e.rember,"onUpdate:checked":t[2]||(t[2]=r=>e.rember=r)},{default:Vue.withCtx(()=>t[3]||(t[3]=[Vue.createTextVNode("记住我")])),_:1},8,["checked"]),Vue.createVNode(Vue.unref(b),{"attr-type":"button",onClick:m},{default:Vue.withCtx(()=>t[4]||(t[4]=[Vue.createTextVNode(" 登录 ")])),_:1})]),default:Vue.withCtx(()=>[Vue.createVNode(Vue.unref(w),{inline:"","label-width":80,model:e,rules:d,size:c.value},{default:Vue.withCtx(()=>[Vue.createVNode(Vue.unref(s),{label:"账号",path:"account"},{default:Vue.withCtx(()=>[Vue.createVNode(Vue.unref(l),{value:e.account,"onUpdate:value":t[0]||(t[0]=r=>e.account=r),placeholder:"输入账号"},null,8,["value"])]),_:1}),Vue.createVNode(Vue.unref(s),{label:"密码",path:"password"},{default:Vue.withCtx(()=>[Vue.createVNode(Vue.unref(l),{value:e.password,"onUpdate:value":t[1]||(t[1]=r=>e.password=r),placeholder:"输入密码"},null,8,["value"])]),_:1})]),_:1},8,["model","size"])]),_:1})]))}},D=V(N,[["__scopeId","data-v-453cc430"]]);export{D as default};
