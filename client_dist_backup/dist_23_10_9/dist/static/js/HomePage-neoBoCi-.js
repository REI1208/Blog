import{_ as w}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{a as C,b as c,d as p,e as k,B as x,f as E,g as _}from"./naive-ui-DzK7k0L2.js";import"./vooks-C-36Wnvh.js";import"./evtd-CI_DDEu_.js";import"./seemly-BaDA4oAW.js";import"./date-fns-_9zXgOLk.js";import"./vueuc-ohIFSY2e.js";import"./@css-render-B7SAju1e.js";import"./vdirs-Bxp-63WN.js";import"./@juggle-C8OzoCMD.js";import"./css-render-BDrvWz3H.js";import"./@emotion-WldOFDRm.js";import"./treemate-HRdUPn5m.js";import"./async-validator-DKvM95Vc.js";import"./lodash-es-C4meFci_.js";const B={class:"container"},h={class:"nav"},$={__name:"HomePage",setup(I){const i=VueRouter.useRouter();VueRouter.useRoute;const d=Vue.inject("axios"),V=Vue.ref(0),u=Vue.ref([]);let s=Vue.ref([]);Vue.onMounted(()=>{m(),r()});const g=a=>{t.categoryId=a,r()},m=async()=>{let a=await d.get("/category/list");u.value=a.data.rows.map(e=>({label:e.name,value:e.id})),console.log(u.value)},v=Vue.computed(()=>{let a=u.value.find(e=>e.value===V.value);return a?a.label:""}),f=a=>{i.push({path:"/datail",query:{id:a.id}})},N=()=>{i.push("/")},y=()=>{i.push("/login")},t=Vue.reactive({page:1,pageSize:3,pageCount:0,count:0,keyword:"",categoryId:0}),r=async(a=0)=>{a!=0&&(t.page=a);let e=await d.get(`/blog/search?keyword=${t.keyword}&page=${t.page}&pageSize=${t.pageSize}&categoryId=${t.categoryId}`),o=e.data.rows;for(let n of o){n.content+="...";let l=new Date(n.create_time);n.create_time=`${l.getFullYear()}/${l.getMonth()+1}/${l.getDate()}`}s.value=o,console.log(e),t.count=e.data.count,t.pageCount=Math.ceil(t.count/t.pageSize),console.log(t)};return(a,e)=>(Vue.openBlock(),Vue.createElementBlock("div",B,[Vue.createElementVNode("div",h,[Vue.createElementVNode("div",{onClick:N},"首页"),Vue.createElementVNode("div",null,[Vue.createVNode(Vue.unref(C),{"onUpdate:value":[g,e[0]||(e[0]=o=>V.value=o)],value:V.value,options:u.value,trigger:"click"},{default:Vue.withCtx(()=>[Vue.createElementVNode("div",null,[e[4]||(e[4]=Vue.createTextVNode(" 分类")),Vue.createElementVNode("span",null,Vue.toDisplayString(v.value),1)])]),_:1},8,["value","options"])]),Vue.createElementVNode("div",{onClick:y},"后台")]),Vue.createVNode(Vue.unref(c)),Vue.createVNode(Vue.unref(p),{class:"search"},{default:Vue.withCtx(()=>[Vue.createVNode(Vue.unref(k),{value:t.keyword,"onUpdate:value":e[1]||(e[1]=o=>t.keyword=o),style:{width:"500px"},placeholder:"请输入关键字"},null,8,["value"]),Vue.createVNode(Vue.unref(x),{type:"primary",ghost:"",onClick:e[2]||(e[2]=o=>r(0))},{default:Vue.withCtx(()=>e[5]||(e[5]=[Vue.createTextVNode("搜索")])),_:1})]),_:1}),(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(Vue.unref(s),(o,n)=>(Vue.openBlock(),Vue.createElementBlock("div",null,[Vue.createVNode(Vue.unref(E),{title:o.title,onClick:l=>f(o)},{footer:Vue.withCtx(()=>[Vue.createVNode(Vue.unref(p),{align:"center"},{default:Vue.withCtx(()=>[Vue.createElementVNode("div",null,Vue.toDisplayString(o.create_time),1)]),_:2},1024)]),default:Vue.withCtx(()=>[Vue.createTextVNode(Vue.toDisplayString(o.content)+" ",1)]),_:2},1032,["title","onClick"])]))),256)),Vue.createVNode(Vue.unref(_),{"onUpdate:page":[r,e[3]||(e[3]=o=>t.page=o)],page:t.page,"page-count":t.pageCount},null,8,["page","page-count"]),Vue.createVNode(Vue.unref(c)),e[6]||(e[6]=Vue.createElementVNode("div",{class:"footer"},[Vue.createElementVNode("div",null,"Power by Rei"),Vue.createElementVNode("div",null,"XCIP 备 XXXXX号")],-1))]))}},q=w($,[["__scopeId","data-v-fe5c9540"]]);export{q as default};
