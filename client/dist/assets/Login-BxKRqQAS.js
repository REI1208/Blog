import{u as k,i,A as _,r as I,a as N,b as S,d as h,f as t,w as o,g as s,m,j as d,y,z,B as C,C as B,D as p,l as g,s as T}from"./index-DFpBoaGP.js";import{_ as U}from"./_plugin-vue_export-helper-DlAUqK2U.js";const j={class:"login-panel"},q={__name:"Login",setup(A){const u=k(),b=i("axios"),c=i("message"),n=_(),f=I("medium"),a=N({account:localStorage.getItem("account")||"",password:localStorage.getItem("password")||"",rember:localStorage.getItem("rember")==="1"}),x={account:[{required:!0,message:"请输入账号",trigger:"blur"},{min:3,max:12,message:"账号长度3-12个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:3,max:18,message:"密码长度6-18个字符",trigger:"blur"}]},v=async()=>{let r=await b.post("/admin/login",{account:a.account,password:a.password});r.data.code==200?(c.success("登陆成功"),n.id=r.data.data.id,n.token=r.data.data.token,n.account=r.data.data.account,a.rember?(localStorage.setItem("account",a.account),localStorage.setItem("rember","1")):(localStorage.removeItem("account"),localStorage.setItem("rember","0")),u.push("/dashboard")):c.error("登陆失败"),console.log(r)},w=()=>{u.push("/")};return(r,e)=>(S(),h("div",j,[t(s(T),{title:"一个未知的地方",hoverable:""},{"header-extra":o(()=>[t(s(m),{"attr-type":"button",onClick:w},{default:o(()=>e[3]||(e[3]=[d(" Back ")])),_:1})]),footer:o(()=>[t(s(y),{checked:a.rember,"onUpdate:checked":e[2]||(e[2]=l=>a.rember=l)},{default:o(()=>e[4]||(e[4]=[d("记住我")])),_:1},8,["checked"]),t(s(m),{"attr-type":"button",onClick:v},{default:o(()=>e[5]||(e[5]=[d(" 登录 ")])),_:1})]),default:o(()=>[t(s(z),{class:"card-tabs","default-value":"signin",size:"large",animated:"","pane-wrapper-style":"margin: 0 -4px","pane-style":"padding-left: 4px; padding-right: 4px; box-sizing: border-box;"},{default:o(()=>[t(s(C),{name:"signin",tab:"登录"},{default:o(()=>[t(s(B),{inline:"","label-width":80,model:a,rules:x,size:f.value},{default:o(()=>[t(s(p),{label:"账号",path:"account"},{default:o(()=>[t(s(g),{value:a.account,"onUpdate:value":e[0]||(e[0]=l=>a.account=l),placeholder:"输入账号"},null,8,["value"])]),_:1}),t(s(p),{label:"密码",path:"password"},{default:o(()=>[t(s(g),{value:a.password,"onUpdate:value":e[1]||(e[1]=l=>a.password=l),placeholder:"输入密码"},null,8,["value"])]),_:1})]),_:1},8,["model","size"])]),_:1})]),_:1})]),_:1})]))}},V=U(q,[["__scopeId","data-v-e570f71e"]]);export{V as default};
