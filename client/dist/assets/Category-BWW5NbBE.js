import{i as y,r as w,o as j,a as N,b as k,d as C,f as n,w as s,g as o,j as u,m as g,e as l,F,h as I,t as c,q as L,I as S,l as U,J as $,K as q}from"./index-DFpBoaGP.js";const K={__name:"Category",setup(A){const v=y("axios"),d=y("message"),D=y("dialog"),x=w([]),i=w(!1),m=w(!1);j(()=>{p()});const p=async()=>{let t=await v.get("/category/list");x.value=t.data.rows},f=N({name:""}),r=N({name:"",id:""}),T=async()=>{try{let t=await v.post("/category/_token/add",{name:f.name});console.log(t),t.data.code==200?(p(),d.success(t.data.msg)):d.error(t.data.msg)}catch(t){d.error(t.response.data.msg)}i.value=!1},b=async t=>{try{D.warning({title:"警告",content:"确认删除？",positiveText:"确定",negativeText:"不确定",onPositiveClick:async()=>{let e=await v.delete(`/category/_token/delete?id=${t.id}`);e.data.code==200?(p(),d.success(e.data.msg)):d.error(e.data.msg)},onNegativeClick:()=>{}})}catch(e){d.error(e.response.data.msg),console.log("其他错误:",e.message)}i.value=!1},B=async t=>{m.value=!0,r.id=t.id,r.name=t.name},M=async()=>{try{let t=await v.put("/category/_token/update",{id:r.id,name:r.name});t.data.code==200?(await q(),d.success(t.data.msg)):d.error(t.data.msg)}catch(t){d.error(t.response.data.msg),console.log("其他错误:",t.message)}m.value=!1};return(t,e)=>(k(),C("div",null,[n(o(g),{onClick:e[0]||(e[0]=a=>i.value=!0)},{default:s(()=>e[7]||(e[7]=[u("添加")])),_:1}),n(o(S),{bordered:!1,"single-line":!1},{default:s(()=>[e[10]||(e[10]=l("thead",null,[l("tr",null,[l("th",null,"编号"),l("th",null,"名称"),l("th",null,"操作")])],-1)),l("tbody",null,[(k(!0),C(F,null,I(x.value,(a,E)=>(k(),C("tr",null,[l("td",null,c(a.id),1),l("td",null,c(a.name),1),l("td",null,[n(o(L),null,{default:s(()=>[n(o(g),{onClick:V=>B(a)},{default:s(()=>e[8]||(e[8]=[u(" 修改 ")])),_:2},1032,["onClick"]),n(o(g),{onClick:V=>b(a)},{default:s(()=>e[9]||(e[9]=[u("删除")])),_:2},1032,["onClick"])]),_:2},1024)])]))),256))])]),_:1}),n(o($),{show:i.value,"onUpdate:show":e[3]||(e[3]=a=>i.value=a),preset:"dialog",title:"Dialog"},{header:s(()=>e[11]||(e[11]=[l("div",null,"添加分类",-1)])),action:s(()=>[l("div",null,[n(o(g),{onClick:e[2]||(e[2]=a=>T())},{default:s(()=>e[12]||(e[12]=[u("添加")])),_:1})])]),default:s(()=>[l("div",null,[n(o(U),{value:f.name,"onUpdate:value":e[1]||(e[1]=a=>f.name=a),type:"text",placeholder:"输入分类"},null,8,["value"])])]),_:1},8,["show"]),n(o($),{show:m.value,"onUpdate:show":e[6]||(e[6]=a=>m.value=a),preset:"dialog",title:"Dialog"},{header:s(()=>e[13]||(e[13]=[l("div",null,"修改分类",-1)])),action:s(()=>[l("div",null,[n(o(g),{onClick:e[5]||(e[5]=a=>M(t.category))},{default:s(()=>e[14]||(e[14]=[u("修改")])),_:1})])]),default:s(()=>[l("div",null,[n(o(U),{value:r.name,"onUpdate:value":e[4]||(e[4]=a=>r.name=a),type:"text",placeholder:"输入分类"},null,8,["value"])])]),_:1},8,["show"])]))}};export{K as default};
