import{NPopselect as M,NDivider as y,NInput as R,NButton as N,NStatistic as T,NNumberAnimation as h,NSpace as g,NCard as z,NPagination as A,NGradientText as x}from"naive-ui";import{u as L}from"./vue-router-Brp_8v4s.js";import{_ as F}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as f,o as O,q as U,f as V,a as _,c as b,D as s,B as a,A as r,u as t,F as j,E as q,i as E,G as i,H as I}from"./@vue-B4preGn0.js";const G={class:"container"},Y={class:"nav"},J={class:"left-box"},K={class:"number-animation"},Q=["innerHTML"],W={class:"footer"},Z={__name:"HomePage",setup(ee){const v=L(),w=E("axios"),m=f(0),u=f([]),k=f({});let C=f([]);O(()=>{B(),d()});const $=n=>{o.categoryId=n,d()},B=async()=>{let n=await w.get("/category/list");u.value=n.data.rows.map(e=>({label:e.name,value:e.id})),console.log(u.value)},P=U(()=>{let n=u.value.find(e=>e.value===m.value);return n?n.label:""}),S=n=>{v.push({path:"/datail",query:{id:n.id}})},D=()=>{v.push("/")},X=()=>{v.push("/login")},o=V({page:1,pageSize:3,pageCount:0,count:0,keyword:"",categoryId:0}),d=async(n=0)=>{n!=0&&(o.page=n);let e=await w.get(`/blog/search?keyword=${o.keyword}&page=${o.page}&pageSize=${o.pageSize}&categoryId=${o.categoryId}`),l=e.data.rows;for(let p of l){p.content+="...";let c=new Date(p.create_time);p.create_time=`${c.getFullYear()}/${c.getMonth()+1}/${c.getDate()}`}C.value=l,console.log(e),o.count=e.data.count,o.pageCount=Math.ceil(o.count/o.pageSize),console.log(o)},H=()=>{var n;(n=k.value)==null||n.play()};return(n,e)=>(_(),b("div",G,[s("div",Y,[s("div",{onClick:D},"首页"),s("div",null,[a(t(M),{"onUpdate:value":[$,e[0]||(e[0]=l=>m.value=l)],value:m.value,options:u.value,trigger:"click",scrollable:""},{default:r(()=>[s("div",null,[e[4]||(e[4]=i(" 分类")),s("span",null,I(P.value),1)])]),_:1},8,["value","options"])]),s("div",{onClick:X},"后台管理")]),a(t(y)),a(t(g),{class:"search",justify:"space-between"},{default:r(()=>[s("div",J,[a(t(R),{value:o.keyword,"onUpdate:value":e[1]||(e[1]=l=>o.keyword=l),style:{width:"500px",marginRight:"10px"},placeholder:"I can see..."},null,8,["value"]),a(t(N),{type:"primary",ghost:"",onClick:e[2]||(e[2]=l=>d(0))},{default:r(()=>e[5]||(e[5]=[i("搜索")])),_:1})]),s("div",K,[a(t(T),{label:"你一共处理了","tabular-nums":""},{suffix:r(()=>e[6]||(e[6]=[i(" 条群消息 ")])),default:r(()=>[a(t(h),{ref_key:"numberAnimationInstRef",ref:k,from:0,to:12039},null,512)]),_:1}),a(t(g),{vertical:""},{default:r(()=>[a(t(N),{color:"#ff69b4",onClick:H},{default:r(()=>e[7]||(e[7]=[i(" Once again ")])),_:1})]),_:1})])]),_:1}),(_(!0),b(j,null,q(t(C),(l,p)=>(_(),b("div",null,[a(t(z),{title:l.title,onClick:c=>S(l),hoverable:"",style:{marginTop:"10px"}},{footer:r(()=>[a(t(g),{align:"center"},{default:r(()=>[s("div",null,I(l.create_time),1)]),_:2},1024)]),default:r(()=>[a(t(g),{align:"center"},{default:r(()=>[s("div",{innerHTML:l.content},null,8,Q)]),_:2},1024)]),_:2},1032,["title","onClick"])]))),256)),a(t(y)),a(t(A),{"onUpdate:page":[d,e[3]||(e[3]=l=>o.page=l)],page:o.page,"page-count":o.pageCount},null,8,["page","page-count"]),a(t(y)),s("div",W,[s("div",null,[a(t(x),{type:"info"},{default:r(()=>e[8]||(e[8]=[i(" Power by Rei(cicd) ")])),_:1})]),s("div",null,[a(t(x),{type:"success"},{default:r(()=>e[9]||(e[9]=[i(" XCIP 备 XXXXX号 ")])),_:1})])])]))}},le=F(Z,[["__scopeId","data-v-b1f0501c"]]);export{le as default};
