import{A as V}from"./index-TNFrET4X.js";import{_ as m}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./pinia-De32WpSU.js";import"./@vue-D5C02RJA.js";const p={class:"login-panel"},g={__name:"Login",setup(f){const u=VueRouter.useRouter();VueRouter.useRoute;const s=Vue.inject("axios"),n=Vue.inject("message"),r=V(),l=Vue.ref("medium"),t=Vue.reactive({account:localStorage.getItem("account")||"",password:localStorage.getItem("password")||"",rember:localStorage.getItem("rember")==="1"}),i={account:[{required:!0,message:"请输入账号",trigger:"blur"},{min:3,max:12,message:"账号长度3-12个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:3,max:18,message:"密码长度6-18个字符",trigger:"blur"}]},d=async()=>{let a=await s.post("/admin/login",{account:t.account,password:t.password});a.data.code==200?(n.success("登陆成功"),r.id=a.data.data.id,r.token=a.data.data.token,r.account=a.data.data.account,t.rember?(localStorage.setItem("account",t.account),localStorage.setItem("rember","1")):(localStorage.removeItem("account"),localStorage.setItem("rember","0")),u.push("/dashboard")):n.error("登陆失败"),console.log(a)},c=()=>{u.push("/")};return(a,e)=>(Vue.openBlock(),Vue.createElementBlock("div",p,[Vue.createVNode(Vue.unref(naive.NCard),{title:"一个未知的地方",hoverable:""},{"header-extra":Vue.withCtx(()=>[Vue.createVNode(Vue.unref(naive.NButton),{"attr-type":"button",onClick:c},{default:Vue.withCtx(()=>e[3]||(e[3]=[Vue.createTextVNode(" Back ")])),_:1})]),footer:Vue.withCtx(()=>[Vue.createVNode(Vue.unref(naive.NCheckbox),{checked:t.rember,"onUpdate:checked":e[2]||(e[2]=o=>t.rember=o)},{default:Vue.withCtx(()=>e[4]||(e[4]=[Vue.createTextVNode("记住我")])),_:1},8,["checked"]),Vue.createVNode(Vue.unref(naive.NButton),{"attr-type":"button",onClick:d},{default:Vue.withCtx(()=>e[5]||(e[5]=[Vue.createTextVNode(" 登录 ")])),_:1})]),default:Vue.withCtx(()=>[Vue.createVNode(Vue.unref(naive.NTabs),{class:"card-tabs","default-value":"signin",size:"large",animated:"","pane-wrapper-style":"margin: 0 -4px","pane-style":"padding-left: 4px; padding-right: 4px; box-sizing: border-box;"},{default:Vue.withCtx(()=>[Vue.createVNode(Vue.unref(naive.NTabPane),{name:"signin",tab:"登录"},{default:Vue.withCtx(()=>[Vue.createVNode(Vue.unref(naive.NForm),{inline:"","label-width":80,model:t,rules:i,size:l.value},{default:Vue.withCtx(()=>[Vue.createVNode(Vue.unref(naive.NFormItem),{label:"账号",path:"account"},{default:Vue.withCtx(()=>[Vue.createVNode(Vue.unref(naive.NInput),{value:t.account,"onUpdate:value":e[0]||(e[0]=o=>t.account=o),placeholder:"输入账号"},null,8,["value"])]),_:1}),Vue.createVNode(Vue.unref(naive.NFormItem),{label:"密码",path:"password"},{default:Vue.withCtx(()=>[Vue.createVNode(Vue.unref(naive.NInput),{value:t.password,"onUpdate:value":e[1]||(e[1]=o=>t.password=o),placeholder:"输入密码"},null,8,["value"])]),_:1})]),_:1},8,["model","size"])]),_:1})]),_:1})]),_:1})]))}},w=m(g,[["__scopeId","data-v-e570f71e"]]);export{w as default};
