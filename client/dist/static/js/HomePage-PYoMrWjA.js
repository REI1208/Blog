import{_ as y}from"./_plugin-vue_export-helper-DlAUqK2U.js";const w={class:"container"},C={class:"nav"},_={class:"left-box"},k={class:"number-animation"},b=["innerHTML"],E={class:"footer"},h={__name:"HomePage",setup(T){const i=VueRouter.useRouter();VueRouter.useRoute;const d=Vue.inject("axios"),V=Vue.ref(0),n=Vue.ref([]),c=Vue.ref({});let s=Vue.ref([]);Vue.onMounted(()=>{v(),o()});const p=u=>{t.categoryId=u,o()},v=async()=>{let u=await d.get("/category/list");n.value=u.data.rows.map(e=>({label:e.name,value:e.id})),console.log(n.value)},f=Vue.computed(()=>{let u=n.value.find(e=>e.value===V.value);return u?u.label:""}),N=u=>{i.push({path:"/datail",query:{id:u.id}})},g=()=>{i.push("/")},m=()=>{i.push("/login")},t=Vue.reactive({page:1,pageSize:3,pageCount:0,count:0,keyword:"",categoryId:0}),o=async(u=0)=>{u!=0&&(t.page=u);let e=await d.get(`/blog/search?keyword=${t.keyword}&page=${t.page}&pageSize=${t.pageSize}&categoryId=${t.categoryId}`),a=e.data.rows;for(let r of a){r.content+="...";let l=new Date(r.create_time);r.create_time=`${l.getFullYear()}/${l.getMonth()+1}/${l.getDate()}`}s.value=a,console.log(e),t.count=e.data.count,t.pageCount=Math.ceil(t.count/t.pageSize),console.log(t)},x=()=>{var u;(u=c.value)==null||u.play()};return(u,e)=>(Vue.openBlock(),Vue.createElementBlock("div",w,[Vue.createElementVNode("div",C,[Vue.createElementVNode("div",{onClick:g},"首页"),Vue.createElementVNode("div",null,[Vue.createVNode(Vue.unref(naive.NPopselect),{"onUpdate:value":[p,e[0]||(e[0]=a=>V.value=a)],value:V.value,options:n.value,trigger:"click",scrollable:""},{default:Vue.withCtx(()=>[Vue.createElementVNode("div",null,[e[4]||(e[4]=Vue.createTextVNode(" 分类")),Vue.createElementVNode("span",null,Vue.toDisplayString(f.value),1)])]),_:1},8,["value","options"])]),Vue.createElementVNode("div",{onClick:m},"后台管理")]),Vue.createVNode(Vue.unref(naive.NDivider)),Vue.createVNode(Vue.unref(naive.NSpace),{class:"search",justify:"space-between"},{default:Vue.withCtx(()=>[Vue.createElementVNode("div",_,[Vue.createVNode(Vue.unref(naive.NInput),{value:t.keyword,"onUpdate:value":e[1]||(e[1]=a=>t.keyword=a),style:{width:"500px",marginRight:"10px"},placeholder:"I can see..."},null,8,["value"]),Vue.createVNode(Vue.unref(naive.NButton),{type:"primary",ghost:"",onClick:e[2]||(e[2]=a=>o(0))},{default:Vue.withCtx(()=>e[5]||(e[5]=[Vue.createTextVNode("搜索")])),_:1})]),Vue.createElementVNode("div",k,[Vue.createVNode(Vue.unref(naive.NStatistic),{label:"你一共处理了","tabular-nums":""},{suffix:Vue.withCtx(()=>e[6]||(e[6]=[Vue.createTextVNode(" 条群消息 ")])),default:Vue.withCtx(()=>[Vue.createVNode(Vue.unref(naive.NNumberAnimation),{ref_key:"numberAnimationInstRef",ref:c,from:0,to:12039},null,512)]),_:1}),Vue.createVNode(Vue.unref(naive.NSpace),{vertical:""},{default:Vue.withCtx(()=>[Vue.createVNode(Vue.unref(naive.NGradientText),{type:"danger"},{default:Vue.withCtx(()=>e[7]||(e[7]=[Vue.createTextVNode(" 这是一个展示数值动画的组件 ")])),_:1}),Vue.createVNode(Vue.unref(naive.NButton),{color:"#ff69b4",onClick:x},{default:Vue.withCtx(()=>e[8]||(e[8]=[Vue.createTextVNode(" Once again ")])),_:1})]),_:1})])]),_:1}),(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(Vue.unref(s),(a,r)=>(Vue.openBlock(),Vue.createElementBlock("div",null,[Vue.createVNode(Vue.unref(naive.NCard),{title:a.title,onClick:l=>N(a),hoverable:"",style:{marginTop:"10px"}},{footer:Vue.withCtx(()=>[Vue.createVNode(Vue.unref(naive.NSpace),{align:"center"},{default:Vue.withCtx(()=>[Vue.createElementVNode("div",null,Vue.toDisplayString(a.create_time),1)]),_:2},1024)]),default:Vue.withCtx(()=>[Vue.createVNode(Vue.unref(naive.NSpace),{align:"center"},{default:Vue.withCtx(()=>[Vue.createElementVNode("div",{innerHTML:a.content},null,8,b)]),_:2},1024)]),_:2},1032,["title","onClick"])]))),256)),Vue.createVNode(Vue.unref(naive.NDivider)),Vue.createVNode(Vue.unref(naive.NPagination),{"onUpdate:page":[o,e[3]||(e[3]=a=>t.page=a)],page:t.page,"page-count":t.pageCount},null,8,["page","page-count"]),Vue.createVNode(Vue.unref(naive.NDivider)),Vue.createElementVNode("div",E,[Vue.createElementVNode("div",null,[Vue.createVNode(Vue.unref(naive.NGradientText),{type:"info"},{default:Vue.withCtx(()=>e[9]||(e[9]=[Vue.createTextVNode(" Power by Rei(cicdtest_2) ")])),_:1})]),Vue.createElementVNode("div",null,[Vue.createVNode(Vue.unref(naive.NGradientText),{type:"success"},{default:Vue.withCtx(()=>e[10]||(e[10]=[Vue.createTextVNode(" XCIP 备 XXXXX号 ")])),_:1})])])]))}},S=y(h,[["__scopeId","data-v-ba01290d"]]);export{S as default};
