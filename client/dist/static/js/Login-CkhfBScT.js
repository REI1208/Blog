import{NButton as c,NCheckbox as w,NTabs as _,NTabPane as I,NForm as N,NFormItem as m,NInput as p,NCard as S}from"naive-ui";import{A as h}from"./index-CgQHfzoW.js";import{u as y}from"./vue-router-B8OcK_GI.js";import{_ as z}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as B,a as C,q as T,B as q,y as t,x as o,u as r,E as d,i as g}from"./@vue-BTzi4prS.js";import"./pinia-C4MM6Yaq.js";import"./axios-CxDlBxsA.js";const U={class:"login-panel"},A={__name:"Login",setup(E){const u=y(),b=g("axios"),i=g("message"),n=h(),f=B("medium"),a=C({account:localStorage.getItem("account")||"",password:localStorage.getItem("password")||"",rember:localStorage.getItem("rember")==="1"}),x={account:[{required:!0,message:"请输入账号",trigger:"blur"},{min:3,max:12,message:"账号长度3-12个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:3,max:18,message:"密码长度6-18个字符",trigger:"blur"}]},v=async()=>{let s=await b.post("/admin/login",{account:a.account,password:a.password});s.data.code==200?(i.success("登陆成功"),n.id=s.data.data.id,n.token=s.data.data.token,n.account=s.data.data.account,a.rember?(localStorage.setItem("account",a.account),localStorage.setItem("rember","1")):(localStorage.removeItem("account"),localStorage.setItem("rember","0")),u.push("/dashboard")):i.error("登陆失败"),console.log(s)},k=()=>{u.push("/")};return(s,e)=>(T(),q("div",U,[t(r(S),{title:"一个未知的地方",hoverable:""},{"header-extra":o(()=>[t(r(c),{"attr-type":"button",onClick:k},{default:o(()=>e[3]||(e[3]=[d(" Back ")])),_:1})]),footer:o(()=>[t(r(w),{checked:a.rember,"onUpdate:checked":e[2]||(e[2]=l=>a.rember=l)},{default:o(()=>e[4]||(e[4]=[d("记住我")])),_:1},8,["checked"]),t(r(c),{"attr-type":"button",onClick:v},{default:o(()=>e[5]||(e[5]=[d(" 登录 ")])),_:1})]),default:o(()=>[t(r(_),{class:"card-tabs","default-value":"signin",size:"large",animated:"","pane-wrapper-style":"margin: 0 -4px","pane-style":"padding-left: 4px; padding-right: 4px; box-sizing: border-box;"},{default:o(()=>[t(r(I),{name:"signin",tab:"登录"},{default:o(()=>[t(r(N),{inline:"","label-width":80,model:a,rules:x,size:f.value},{default:o(()=>[t(r(m),{label:"账号",path:"account"},{default:o(()=>[t(r(p),{value:a.account,"onUpdate:value":e[0]||(e[0]=l=>a.account=l),placeholder:"输入账号"},null,8,["value"])]),_:1}),t(r(m),{label:"密码",path:"password"},{default:o(()=>[t(r(p),{value:a.password,"onUpdate:value":e[1]||(e[1]=l=>a.password=l),placeholder:"输入密码"},null,8,["value"])]),_:1})]),_:1},8,["model","size"])]),_:1})]),_:1})]),_:1})]))}},D=z(A,[["__scopeId","data-v-e570f71e"]]);export{D as default};
